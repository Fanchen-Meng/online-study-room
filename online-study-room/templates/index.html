<!DOCTYPE html>
<html>
<head>
    <title>Online Study Room</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Pomodoro Timer -->
        <div class="pomodoro">
            <div id="timer" class="timer-display">25:00</div>
            <div class="timer-controls">
                <button id="startBtn" class="btn-control">Start Focus</button>
                <button id="resetBtn" class="btn-control">Reset</button>
            </div>
            <div class="sound-control">
                <audio id="ambientSound" loop>
                    <source src="{{ url_for('static', filename='sounds/ambient.mp3') }}" type="audio/mpeg">
                </audio>
                <button id="toggleSoundBtn" class="btn-control">Play/Pause Ambient Sound</button>
            </div>
        </div>

        <!-- Task Management -->
        <div class="tasks">
            <h2>Task List</h2>
            <div class="task-inputs">
                <input type="text" id="taskInput" placeholder="Enter task name" required>
                <input type="number" id="durationInput" placeholder="Estimated minutes" min="1" required>
                <button id="addTaskBtn">Add Task</button>
            </div>
            <ul id="taskList"></ul>
        </div>

        <!-- Music Management with Folders -->
        <div class="music-controls">
            <h3>Background Music</h3>
            
            <!-- Folder Controls -->
            <div class="folder-controls">
                <div class="folder-select">
                    <label for="folderSelect">Current Folder:</label>
                    <span id="currentFolderName">default</span>
                </div>
                <div class="folder-actions">
                    <input type="text" id="folderNameInput" placeholder="New folder name">
                    <button id="newFolderBtn" onclick="createFolder(folderNameInput.value)">Create Folder</button>
                    <button id="deleteFolderBtn" onclick="deleteCurrentFolder()">Delete Folder</button>
                </div>
            </div>
            
            <div class="folders-list">
                <h4>Folders</h4>
                <ul id="folderList"></ul>
            </div>
            
            <div id="currentMusicName">Current: None</div>
            <label for="musicUpload" class="music-upload-label">
                <i class="fa fa-upload"></i> Upload Music to Current Folder
            </label>
            <input type="file" id="musicUpload" accept="audio/*">
            <ul id="musicList"></ul>
        </div>

        <!-- Statistics Panel -->
        <div class="stats">
            <h2>Study Statistics</h2>
            <div class="chart-container">
                <canvas id="progressChart"></canvas>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/timer.js') }}"></script>
</body>
</html>    